<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verifying 5nn interpolation with gstat implemented in mlr • agrometeoR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Verifying 5nn interpolation with gstat implemented in mlr">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">agrometeoR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Development_roadmap.html">Development Roadmap</a>
    </li>
    <li>
      <a href="../articles/Humain_intercomparison_model.html">Intercomparison at Humain</a>
    </li>
    <li>
      <a href="../articles/Partners.html">Partners</a>
    </li>
    <li>
      <a href="../articles/Presentation_agromet_project.html">Presentation of the Agromet Project</a>
    </li>
    <li>
      <a href="../articles/Spatialization_method_approach.html">A methodological approach to assess the best weather spatialization technique</a>
    </li>
    <li>
      <a href="../articles/benchmarking_example.html">Benchmarking example</a>
    </li>
    <li>
      <a href="../articles/gstat_integration_mlr.html">Integration of gstat into mlr</a>
    </li>
    <li>
      <a href="../articles/interpolation_grid_creation.html">Creation of the interpolation Grid</a>
    </li>
    <li>
      <a href="../articles/package_structuration.html">Package structuration</a>
    </li>
    <li>
      <a href="../articles/spatialization_example.html">A simple spatialization example using agrometeoR</a>
    </li>
    <li>
      <a href="../articles/two_years_benchmark.html">a 2 years benchmark</a>
    </li>
    <li>
      <a href="../articles/understanding_knn.html">Verifying 5nn interpolation with gstat implemented in mlr</a>
    </li>
    <li>
      <a href="../articles/using_packrat.html">Using packrat</a>
    </li>
    <li>
      <a href="../articles/weather_spatialisation_review.html">Agromet : Weather Spatialization Review and Benchmark</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../tutorials/presentation.html">FOSS4GBXL2018</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pokyah/agrometeoR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="understanding_knn_files/htmlwidgets-1.2/htmlwidgets.js"></script><script src="understanding_knn_files/jquery-1.12.4/jquery.min.js"></script><link href="understanding_knn_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="understanding_knn_files/leaflet-1.3.1/leaflet.js"></script><link href="understanding_knn_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="understanding_knn_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="understanding_knn_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="understanding_knn_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="understanding_knn_files/leaflet-binding-2.0.0/leaflet.js"></script><script src="understanding_knn_files/leaflet-providers-1.1.17/leaflet-providers.js"></script><script src="understanding_knn_files/leaflet-providers-plugin-2.0.0/leaflet-providers-plugin.js"></script><link href="understanding_knn_files/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="understanding_knn_files/HomeButton-0.0.1/home-button.js"></script><script src="understanding_knn_files/HomeButton-0.0.1/easy-button-src.min.js"></script><link href="understanding_knn_files/PopupTable-0.0.1/popup.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Verifying 5nn interpolation with gstat implemented in mlr</h1>
                        <h4 class="author">Thomas Goossens</h4>
            
            <h4 class="date">12/10/2018</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pokyah/agrometeoR/blob/master/vignettes/understanding_knn.Rmd"><code>vignettes/understanding_knn.Rmd</code></a></small>
      <div class="hidden name"><code>understanding_knn.Rmd</code></div>

    </div>

    
    
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<p>As the documentation about the use of gstat to make a knn interpolation is really scarce (the only relevant information we have found is in the <a href="http://rspatial.org/analysis/rst/4-interpolation.html">chapter interpolation of the Spatial Data Analysis and Modeling with R website</a>), we have conducted a quick investigation to make sure that what gstat performs when using our nearest neighbours learners (e.g. <code>lrn.gstat.5nn</code>) correponds to what we actually expect from the algorithm.</p>
<p>Our expectation was that for a specific location where we want to predict a value, the algorithm computes the mean of the values of its 5 spatially closest neighbours when we implicitly filter the features to latitude and longitude only.</p>
<p>As it will be demonstrated here below, the gstat nearest neighbour (knn) interpolation works as expected.</p>
</div>
<div id="load-the-libraries" class="section level2">
<h2 class="hasAnchor">
<a href="#load-the-libraries" class="anchor"></a>Load the libraries</h2>
<p>Here are all the libraries required for our investigation</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># loading mlr &amp; agrometeoR</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(FNN)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(mlr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(agrometeoR)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sf)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(mapview)</code></pre></div>
</div>
<div id="example-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#example-dataset" class="anchor"></a>Example dataset</h2>
<p>We create an example dataset from our AGROMET weather database. We extract an hourly observation of temperature for the 29 stations of the Pameseb AWS network.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">user_token =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"AGROMET_API_V1_KEY"</span>)
dfrom =<span class="st"> </span>ex_dfrom
dto =<span class="st"> </span>ex_dto
stations =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(stations.df<span class="op">$</span>sid), <span class="dt">collapse =</span> <span class="st">","</span>)
sensor =<span class="st"> "tsa"</span>
staticExpl =<span class="st"> "elevation"</span>

myDataset =<span class="st"> </span><span class="kw"><a href="../reference/makeDataset.html">makeDataset</a></span>(
  <span class="dt">user_token =</span> user_token,
  <span class="dt">stations =</span> stations,
  <span class="dt">dfrom =</span> dfrom,
  <span class="dt">dto =</span> dto,
  <span class="dt">sensor =</span> sensor,
  <span class="dt">staticExpl =</span> staticExpl
)</code></pre></div>
<p>To simplify our future calculations, we add a new custom id column where each id correspond to the row number</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dataset =<span class="st"> </span>myDataset<span class="op">$</span>output<span class="op">$</span>value[[<span class="dv">1</span>]]
id =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(dataset))
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(id) =<span class="st"> "id"</span>
dataset =<span class="st"> </span>dataset <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span>(id)</code></pre></div>
</div>
<div id="getting-the-5-nearest-neighbours-ids-of-each-station" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-the-5-nearest-neighbours-ids-of-each-station" class="anchor"></a>Getting the 5 nearest neighbours id’s of each station</h2>
<p>Based on this <a href="https://stackoverflow.com/questions/44187812/5-nearest-neighbors-based-on-given-distance-in-r">stackoverflow question</a>, for each station, we get its 5 closest neigbours id’s and distances.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate the nearest ID and distance</span>
near_data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/FNN/topics/get.knn">get.knn</a></span>(dataset[, <span class="dv">4</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">k =</span> <span class="dv">5</span>)

<span class="co"># Extract the nearest ID</span>
nn_index &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(near_data<span class="op">$</span>nn.index)

<span class="co"># Extract the nearest Distance</span>
nn_dist &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(near_data<span class="op">$</span>nn.dist)

<span class="co"># combining again in dataset</span>
dataset =<span class="st"> </span>dataset <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span>(nn_index) 

<span class="co"># Excerpt of the data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(dataset)</code></pre></div>
<pre><code>##   sid               mtime  tsa        x        y elevation id V1 V2 V3 V4
## 1   1 2017-03-04 15:00:00  8.4 721240.2 568849.6  475.4301  1  5  2  9 29
## 2   4 2017-03-04 15:00:00  7.1 714221.2 543453.8  343.1246  2  1 17  3 27
## 3   7 2017-03-04 15:00:00  8.9 750500.7 550825.6  348.5109  3 17  4  5  1
## 4   9 2017-03-04 15:00:00 11.2 753130.6 581716.9  497.0389  4  5  3  1 13
## 5  10 2017-03-04 15:00:00 11.0 734687.9 580969.6  389.6670  5  1  4  9 29
## 6  13 2017-03-04 15:00:00  9.0 641664.8 588814.6  259.5348  6 23 27  8 21
##   V5
## 1  3
## 2  5
## 3  2
## 4 12
## 5  3
## 6 11</code></pre>
</div>
<div id="training-and-testing-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#training-and-testing-dataset" class="anchor"></a>Training and testing dataset</h2>
<p>We will conduct our test on a single station. For this purpose, we exclude the first row from our dataset to create the training set. The test set will therefore correspond to this excluded station.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train =<span class="st"> </span>dataset[<span class="dv">2</span><span class="op">:</span><span class="dv">29</span>,]
test =<span class="st"> </span>dataset[<span class="dv">1</span><span class="op">:</span><span class="dv">1</span>,]

train.task =<span class="st"> </span><span class="kw"><a href="../reference/makeTask.html">makeTask</a></span>(
  <span class="dt">dataset =</span> train,
  <span class="dt">target =</span> <span class="st">"tsa"</span>
)
train.task =<span class="st"> </span>train.task<span class="op">$</span>output<span class="op">$</span>value
train.data =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/mlr/topics/getTaskData">getTaskData</a></span>(train.task)

test.task =<span class="st">  </span><span class="kw"><a href="../reference/makeTask.html">makeTask</a></span>(
  <span class="dt">dataset =</span> test,
  <span class="dt">target =</span> <span class="st">"tsa"</span>
)
test.task =<span class="st"> </span>test.task<span class="op">$</span>output<span class="op">$</span>value
test.data =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/mlr/topics/getTaskData">getTaskData</a></span>(test.task)</code></pre></div>
</div>
<div id="building-the-model-predicting-with-gstat" class="section level2">
<h2 class="hasAnchor">
<a href="#building-the-model-predicting-with-gstat" class="anchor"></a>Building the model &amp; predicting with gstat</h2>
<p>We can now “train” our learner on the train set and use it to predict the value of the test set. The learner we invoke here is a learner that comes prebuild with the agrometeoR package. It’s source code can be found in the <a href="https://github.com/pokyah/agrometeoR/blob/master/data-raw/makeLearners.R">makeLearners.R</a> file on github</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># training</span>
train.model.5nn =<span class="st"> </span>mlr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mlr/topics/train">train</a></span>(
  <span class="dt">learner =</span> learners<span class="op">$</span>otherLearners<span class="op">$</span>lrn.gstat.5nn,
  <span class="dt">task =</span> train.task)

<span class="co"># predicting</span>
test.pred.5nn =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(train.model.5nn, test.task)</code></pre></div>
<pre><code>## [inverse distance weighted interpolation]</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># adding predicted info to test set</span>
test.data =<span class="st"> </span>test.data <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span>(test.pred.5nn<span class="op">$</span>data) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">residuals =</span> truth <span class="op">-</span><span class="st"> </span>response)

<span class="co"># excerpt of the data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(test.data)</code></pre></div>
<pre><code>##   tsa        x        y elevation id V1 V2 V3 V4 V5 id1 truth response se
## 1 8.4 721240.2 568849.6  475.4301  1  5  2  9 29  3   1   8.4 10.11553 NA
##   residuals
## 1 -1.715529</code></pre>
<p>We see that the gstat 5nn predicted value corresponds to 10.1155288 Let’s make a manual computation to check if we get the same value !</p>
</div>
<div id="manual-computation" class="section level2">
<h2 class="hasAnchor">
<a href="#manual-computation" class="anchor"></a>Manual computation</h2>
<p>The manual computation is simple. We take the <code>tsa</code> value of the 5 stations which are closest to our excluded station and compute their mean. These stations id can be found using by filtering our dataset by the id that matche the id stored the columns V1, V2, V3, V4, V5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">manual_5NN =<span class="st"> </span>dataset <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(id <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(dataset[<span class="dv">1</span>,<span class="dv">8</span><span class="op">:</span><span class="dv">12</span>])) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span>(<span class="dt">.vars =</span> <span class="st">"tsa"</span>, <span class="dt">.funs =</span> mean)

manual_5NN</code></pre></div>
<pre><code>##   tsa
## 1 9.9</code></pre>
<p>We see that this manual computation provides the exact same value of the one provided by gstat !</p>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>We can assert that the behaviour of the gstat learner correspond to our expectations. Also, we must note that we have define our gstat.5nn learner such as the values of the neighbours are not weighted according to their distance to the station for which we want to predict the value. Here is the code corresponding to the definition of our gstat.5nn learner :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  lrn.gstat.5nn =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/mlr/topics/makeFilterWrapper">makeFilterWrapper</a></span>(
    <span class="dt">learner =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/mlr/topics/makeLearner">makeLearner</a></span>(
      <span class="dt">cl =</span> <span class="st">"regr.gstat"</span>,
      <span class="dt">id =</span> <span class="st">"nn5"</span>,
      <span class="dt">par.vals =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
        <span class="dt">set =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">idp =</span> <span class="dv">0</span>),
        <span class="dt">nmax =</span> <span class="dv">5</span>,
        <span class="dt">debug.level =</span> <span class="dv">0</span>),
      <span class="dt">predict.type =</span> <span class="st">"se"</span>),
    <span class="dt">fw.method =</span> <span class="st">"linear.correlation"</span>,
    <span class="dt">fw.mandatory.feat =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"y"</span>, <span class="st">"x"</span>),
    <span class="dt">fw.abs =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>## Warning in makeParam(id = id, type = "numeric", learner.param = TRUE, lower = lower, : NA used as a default value for learner parameter psill.
## ParamHelpers uses NA as a special value for dependent parameters.</code></pre>
<pre><code>## Warning in makeParam(id = id, type = "numeric", learner.param = TRUE, lower = lower, : NA used as a default value for learner parameter range.
## ParamHelpers uses NA as a special value for dependent parameters.</code></pre>
<p>The line <code>set = list(idp = 0)</code> actually tells that values of the neighbours must not be weighted according to their distance to the station for which we want to predict the value.</p>
<p>Here below is a map of the used station and their values</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dataset.sf =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_as_sf">st_as_sf</a></span>(dataset, <span class="dt">coords =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"x"</span>,<span class="st">"y"</span>))
sf<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_crs">st_crs</a></span>(dataset.sf) =<span class="st"> </span><span class="dv">3812</span>

test.data.sf =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_as_sf">st_as_sf</a></span>(test.data, <span class="dt">coords =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"x"</span>,<span class="st">"y"</span>))
sf<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_crs">st_crs</a></span>(test.data.sf) =<span class="st"> </span><span class="dv">3812</span>

train.data.sf =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_as_sf">st_as_sf</a></span>(train.data, <span class="dt">coords =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"x"</span>,<span class="st">"y"</span>))
sf<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_crs">st_crs</a></span>(train.data.sf) =<span class="st"> </span><span class="dv">3812</span>

map =<span class="st"> </span>mapview<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mapview/topics/mapView">mapview</a></span>(test.data.sf[<span class="st">"response"</span>]) <span class="op">+</span><span class="st"> </span>mapview<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mapview/topics/mapView">mapview</a></span>(train.data.sf[<span class="st">"tsa"</span>]) <span class="op">+</span><span class="st"> </span>
mapview<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mapview/topics/mapView">mapview</a></span>(dataset.sf[<span class="st">"id"</span>])

map</code></pre></div>
<div id="htmlwidget-12e2c6e2344fe4adae63" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-12e2c6e2344fe4adae63">{"x":{"options":{"minZoom":1,"maxZoom":100,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",1,"CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter",2,"CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",3,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",4,"Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenTopoMap",5,"OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[49.9266699999886,5.36076,6,null,"test.data.sf[\"response\"]",{"interactive":true,"className":"","stroke":true,"color":"#333333","weight":2,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,["<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>1<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>response<\/b><\/td><td>10.1155287538881<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"10.1155287538881",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[5.36076,49.9266699999886,5.36076,49.9266699999886,"Zoom to test.data.sf[\"response\"]","<strong> test.data.sf[\"response\"] <\/strong>","bottomright"]},{"method":"addCircleMarkers","args":[[49.6991699999881,49.7603799999882,50.0376099999888,50.0338399999888,50.1104799999889,50.3988599999895,50.2975299999893,50.165979999989,50.6689999999899,50.4522299999896,50.3050399999893,50.3514299999894,50.4442399999895,50.5547799999898,50.5294499999897,49.5385099999878,50.67205999999,50.5231499999897,50.68278999999,50.5430599999897,50.4589399999896,50.2923899999893,50.5791099999898,50.71705999999,50.5837499999898,49.9540499999886,50.5195699999897,50.1936199999891],[5.25873,5.76345,5.80831,5.55073,4.25208,5.60265,4.84478,5.2428,4.64164,4.76334,6.08472,5.86865,6.24363,4.89572,4.60084,5.57745,5.18256,5.15194,5.49638,4.23666,5.39636,4.33975,3.3045,4.78626,4.48753,4.84671,5.79911,5.25536],6,null,"train.data.sf[\"tsa\"]",{"interactive":true,"className":"","stroke":true,"color":"#333333","weight":2,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#482374","#365C8D","#1FA187","#1FA187","#31688E","#9FDA3A","#26AD81","#26AD81","#26AD81","#4AC16D","#35B779","#80D34E","#35B779","#35B779","#26AD81","#482374","#BFDF25","#4AC16D","#DFE318","#1FA187","#35B779","#1F968B","#424186","#26AD81","#1FA187","#471365","#BFDF25","#1FA187"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,["<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>2<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>7.1<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>3<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>8.9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>4<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.2<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>5<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>6<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>7<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>13.6<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>8<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.4<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>9<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.3<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>10<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.3<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>11<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>12.4<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>12<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.8<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>13<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>12.9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>14<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>15<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.8<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>16<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.4<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>17<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>7.1<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>18<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>14<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>19<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>12.2<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>20<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>14.3<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>21<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>10.9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>22<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>12<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>23<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>10.6<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>24<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>7.9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>25<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.6<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>26<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.1<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>27<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>6.7<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>28<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>14<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>29<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>tsa<\/b><\/td><td>11.2<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["7.1","8.9","11.2","11","9","13.6","11.4","11.3","11.3","12.4","11.8","12.9","11.9","11.8","11.4","7.1","14","12.2","14.3","10.9","12","10.6","7.9","11.6","11.1","6.7","14","11.2"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[3.3045,49.5385099999878,6.24363,50.71705999999,"Zoom to train.data.sf[\"tsa\"]","<strong> train.data.sf[\"tsa\"] <\/strong>","bottomright"]},{"method":"addCircleMarkers","args":[[49.9266699999886,49.6991699999881,49.7603799999882,50.0376099999888,50.0338399999888,50.1104799999889,50.3988599999895,50.2975299999893,50.165979999989,50.6689999999899,50.4522299999896,50.3050399999893,50.3514299999894,50.4442399999895,50.5547799999898,50.5294499999897,49.5385099999878,50.67205999999,50.5231499999897,50.68278999999,50.5430599999897,50.4589399999896,50.2923899999893,50.5791099999898,50.71705999999,50.5837499999898,49.9540499999886,50.5195699999897,50.1936199999891],[5.36076,5.25873,5.76345,5.80831,5.55073,4.25208,5.60265,4.84478,5.2428,4.64164,4.76334,6.08472,5.86865,6.24363,4.89572,4.60084,5.57745,5.18256,5.15194,5.49638,4.23666,5.39636,4.33975,3.3045,4.78626,4.48753,4.84671,5.79911,5.25536],6,null,"dataset.sf[\"id\"]",{"interactive":true,"className":"","stroke":true,"color":"#333333","weight":2,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#470E61","#481B6D","#482777","#46337E","#433E85","#3F4889","#3B528B","#365C8D","#32658E","#32658E","#2E6E8E","#2A768E","#277F8E","#24878E","#21908C","#1F998A","#1FA187","#24AA83","#2DB27D","#3ABA76","#3ABA76","#4AC16D","#5DC863","#71CF57","#87D549","#9FDA3A","#B7DE2A","#CFE11C","#E7E419"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,["<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>1<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>1<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>2<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>2<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>3<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>3<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>4<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>4<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>5<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>5<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>6<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>6<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>7<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>7<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>8<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>8<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>9<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>9<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>10<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>10<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>11<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>11<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>12<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>12<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>13<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>13<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>14<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>14<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>15<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>15<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>16<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>16<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>17<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>17<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>18<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>18<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>19<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>19<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>20<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>20<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>21<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>21<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>22<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>22<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>23<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>23<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>24<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>24<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>25<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>25<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>26<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>26<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>27<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>27<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>28<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>28<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\"><table id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td>29<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>id<\/b><\/td><td>29<\/td><\/tr><tr><td>2<\/td><td><b>geometry<\/b><\/td><td>sfc_POINT<\/td><\/tr><\/table><\/body><\/html>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[3.3045,49.5385099999878,6.24363,50.71705999999,"Zoom to dataset.sf[\"id\"]","<strong> dataset.sf[\"id\"] <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["test.data.sf[\"response\"]","train.data.sf[\"tsa\"]","dataset.sf[\"id\"]"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addHomeButton","args":[3.3045,49.5385099999878,6.24363,50.71705999999,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[49.9266699999886,49.9266699999886],"lng":[5.36076,5.36076]},"fitBounds":[49.5385099999878,3.3045,50.71705999999,6.24363,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      });\n      return newDiv;\n      }\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n      //$(el).keypress(function (e) {\n      //  if (e.which == 32 || event.keyCode == 32) {\n      //    alert('space key is pressed');\n      //  }\n      //});\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n      map.on('mousemove', function (e) {\n      lnlt.text(\n                           ' x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ' +\n                           ' | lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() + ' ');\n      });\n      };\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#intro">Intro</a></li>
      <li><a href="#load-the-libraries">Load the libraries</a></li>
      <li><a href="#example-dataset">Example dataset</a></li>
      <li><a href="#getting-the-5-nearest-neighbours-ids-of-each-station">Getting the 5 nearest neighbours id’s of each station</a></li>
      <li><a href="#training-and-testing-dataset">Training and testing dataset</a></li>
      <li><a href="#building-the-model-predicting-with-gstat">Building the model &amp; predicting with gstat</a></li>
      <li><a href="#manual-computation">Manual computation</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Thomas Goossens.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
